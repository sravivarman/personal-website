{{/* 
Pexels API Configuration
This partial provides the API key and queries to the frontend JavaScript.

For GitHub Pages: Set the API key in config.toml under [params.pexels]
  api_key = "your_pexels_api_key"

For Vercel/Netlify: Use environment variables (PEXELS_API_KEY)
*/}}

{{/* Get Pexels config from Hugo params */}}
{{ $pexelsQueries := .Site.Params.pexels.queries }}
{{ $pexelsApiKey := .Site.Params.pexels.api_key | default (getenv "PEXELS_API_KEY") }}

{{ if not $pexelsQueries }}
  {{ errorf "Pexels queries not configured in config.toml under [params.pexels.queries]" }}
{{ end }}

<div id="pexels-config" 
     data-queries="{{ $pexelsQueries | jsonify }}" 
     data-api-key="{{ $pexelsApiKey }}"
     style="display: none;"></div>

<script>
  // Load configuration from data attributes (set by Hugo at build time)
  const configElement = document.getElementById('pexels-config');
  
  if (configElement) {
    // Get API key from data attribute
    window.PEXELS_API_KEY = configElement.getAttribute('data-api-key') || null;
    
    // Get queries from data attribute
    try {
      window.PEXELS_QUERIES = JSON.parse(configElement.getAttribute('data-queries'));
    } catch (error) {
      console.error('Error parsing Pexels queries:', error);
      window.PEXELS_QUERIES = [];
    }
    
    if (window.PEXELS_API_KEY) {
      console.log('Pexels configuration loaded successfully');
    } else {
      console.warn('Pexels API key not configured - background images will not load');
    }
  } else {
    console.error('Pexels config element not found');
    window.PEXELS_API_KEY = null;
    window.PEXELS_QUERIES = [];
  }
</script>
